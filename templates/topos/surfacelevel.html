{# 渲染图模板 #}
{% extends "render/topolayout.html" %}
{% import 'render/macro' as macro %}
{% block headscript %}
    {{ macro.render_chart_dependencies(chart) }}
{% endblock %}

{% block title_and_others %}

{% endblock %}

{% block widget %}
    <div class="container">
        <div class="row">
            <div class="col-auto mr-auto">
                <form action="" method="post" enctype="multipart/form-data">
                    <div class="form-group">
                        <label for="inputTopo">Topo</label>
                        <select name="TopoName" id="inputTopo" class="form-control">
                            <option selected value="topo66.json">topo66</option>
                            <option value="topo.json">topo</option>
                        </select>
                    </div>
                    <input type="range" class="custom-range" min="0" max="50" name="sliderTime">
                    <button type="submit" class="btn btn-primary">更换拓扑</button>
                </form>
            </div>
            <div class="col-auto">
                <div class="form-group">

                    <label for="exampleFormControlTextarea1">删除节点之间的连接</label>
                    <input class="form-control" id="node1">
                    <input class="form-control" id="node2">

                </div>
            </div>
            <div class="col-auto">
                <button type="button" class="btn btn-success" onclick="deleteLink()">预览效果</button>
                <script>
                    deleteLink = function (){
                        const node1 = document.getElementById("node1").value;
                        const node2 = document.getElementById("node2").value;
                        for (let i = 0; i < option_graph1.series[0].links.length; i++) {
                            if (option_graph1.series[0].links[i].source === node1
                                && option_graph1.series[0].links[i].target === node2) {
                                option_graph1.series[0].links.splice(i, 1)
                            }
                            if (option_graph1.series[0].links[i].source === node2
                                && option_graph1.series[0].links[i].target === node1) {
                                option_graph1.series[0].links.splice(i, 1)
                            }
                        }
                        chart_graph1.setOption(option_graph1);
                    }
                </script>
                <button type="button" class="btn btn-primary">保存并刷新</button>
            </div>

        </div>
    </div>
    <br>
{% endblock %}

{% block graph %}
    <div id="graph1" class="chart-container border" style="width: 900px; height: 500px; user-select: none; position: relative;" _echarts_instance_="ec_1610631543437"><div style="position: relative; width: 898px; height: 498px; padding: 0px; margin: 0px; border-width: 0px; cursor: pointer;"><canvas style="position: absolute; left: 0px; top: 0px; width: 898px; height: 498px; user-select: none; padding: 0px; margin: 0px; border-width: 0px;" data-zr-dom-id="zr_0" width="898" height="498"></canvas></div><div style="position: absolute; display: none; border-style: solid; white-space: nowrap; z-index: 9999999; transition: left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s; background-color: rgba(50, 50, 50, 0.7); border-width: 0px; border-color: rgb(51, 51, 51); border-radius: 4px; color: rgb(255, 255, 255); font: 14px / 21px Microsoft YaHei; padding: 5px; left: 722px; top: 453px; pointer-events: none;">33 &gt; 32</div></div>
    <script>
        var chart_graph1 = echarts.init(
            document.getElementById('graph1'), 'white', {renderer: 'canvas'});

        var option_graph1 = {
            "animation": true,
            "animationThreshold": 2000,
            "animationDuration": 1000,
            "animationEasing": "cubicOut",
            "animationDelay": 0,
            "animationDurationUpdate": 300,
            "animationEasingUpdate": "cubicOut",
            "animationDelayUpdate": 0,
            "color": [
                "#c23531",
                "#2f4554",
                "#61a0a8",
                "#d48265",
                "#749f83",
                "#ca8622",
                "#bda29a",
                "#6e7074",
                "#546570",
                "#c4ccd3",
                "#f05b72",
                "#ef5b9c",
                "#f47920",
                "#905a3d",
                "#fab27b",
                "#2a5caa",
                "#444693",
                "#726930",
                "#b2d235",
                "#6d8346",
                "#ac6767",
                "#1d953f",
                "#6950a1",
                "#918597"
            ],
            "series": [

            ],
            "legend": [
                {
                    "data": [],
                    "selected": {},
                    "show": true,
                    "padding": 5,
                    "itemGap": 10,
                    "itemWidth": 25,
                    "itemHeight": 14
                }
            ],
            "tooltip": {
                "show": true,
                "trigger": "item",
                "triggerOn": "mousemove|click",
                "axisPointer": {
                    "type": "line"
                },
                "showContent": true,
                "alwaysShowContent": false,
                "showDelay": 0,
                "hideDelay": 100,
                "textStyle": {
                    "fontSize": 14
                },
                "borderWidth": 0,
                "padding": 5
            },
            "title": [
                {
                    "text": "Satellite-sdn topo",
                    "padding": 5,
                    "itemGap": 10
                }
            ]
        };
        chart_graph1.setOption(option_graph1);


    </script>
{% endblock %}


{% block messages %}
{% endblock %}

{% block SurfaceisActive %}active{% endblock %}